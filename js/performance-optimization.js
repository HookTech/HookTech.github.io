!function(){"use strict";function e(){document.querySelector(".mouse-follower-enhanced")&&initMouseFollower()}function t(){if("IntersectionObserver"in window){const e=new IntersectionObserver(t=>{t.forEach(t=>{if(t.isIntersecting){const n=t.target;n.dataset.src&&(n.src=n.dataset.src,n.classList.remove("lazy"),e.unobserve(n))}})},{rootMargin:"50px 0px",threshold:.01});document.querySelectorAll("img[data-src]").forEach(t=>{e.observe(t)})}}function n(e,t){let n;return function(){const o=arguments,r=this;n||(e.apply(r,o),n=!0,setTimeout(()=>n=!1,t))}}function o(){const e=n(()=>{const e=window.pageYOffset,t=document.querySelector(".navbar-enhanced");t&&(e>50?t.classList.add("scrolled"):t.classList.remove("scrolled"))},16);window.addEventListener("scroll",e,{passive:!0})}function r(){!function(){const e=document.createElement("style");e.textContent="\n            body { margin: 0; font-family: system-ui, sans-serif; }\n            .navbar { position: fixed; top: 0; left: 0; right: 0; z-index: 1000; }\n            .main-content { margin-top: 60px; }\n        ",document.head.insertBefore(e,document.head.firstChild)}(),function(){const e=document.createElement("link");e.rel="preload",e.href="/css/performance-optimization.css",e.as="style",document.head.appendChild(e),["/img/avatar.png","/img/default.png"].forEach(e=>{const t=document.createElement("link");t.rel="preload",t.href=e,t.as="image",document.head.appendChild(t)})}(),document.createDocumentFragment(),document.querySelectorAll(".fade-in").forEach((e,t)=>{e.style.animationDelay=.05*t+"s"}),"requestIdleCallback"in window?requestIdleCallback(()=>{e()}):setTimeout(e,2e3),function(){const e=document.querySelector(".page-loader-enhanced");e&&window.addEventListener("load",()=>{setTimeout(()=>{e.style.opacity="0",setTimeout(()=>{e.remove()},300)},500)})}(),t(),o(),window.addEventListener("beforeunload",()=>{window.performance.getEntriesByType("measure").forEach(e=>{e.name.includes("timer")&&clearTimeout(e.startTime)})}),"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").catch(()=>{}),["https://cdn.jsdelivr.net","https://busuanzi.ibruce.info","https://fonts.googleapis.com","https://fonts.gstatic.com","https://at.alicdn.com"].forEach(e=>{const t=document.createElement("link");t.rel="preconnect",t.href=e,t.crossOrigin="anonymous",document.head.appendChild(t)}),[{href:"https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.min.js",as:"script"},{href:"https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css",as:"style"}].forEach(e=>{const t=document.createElement("link");t.rel="preload",t.href=e.href,t.as=e.as,t.crossOrigin="anonymous",document.head.appendChild(t)}),window.addEventListener("load",()=>{const e=performance.getEntriesByType("navigation")[0],t=e.loadEventEnd-e.loadEventStart;t>3e3&&console.warn("页面加载时间过长:",t+"ms")}),new PerformanceObserver(e=>{e.getEntries().forEach(e=>{e.duration>1e3&&console.warn("资源加载缓慢:",e.name,e.duration+"ms")})}).observe({entryTypes:["resource"]})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",r):r(),window.PerformanceOptimizer={debounce:function(e,t){let n;return function(...o){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),e(...o)},t)}},throttle:n,optimizeLazyLoading:t,optimizeScrollEvents:o}}();