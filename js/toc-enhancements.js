!function(){"use strict";function t(){const t=document.getElementById("toc");t&&(t.classList.add("loading"),setTimeout(()=>{e(),n(),o(),t.classList.remove("loading")},300))}function e(){const t=document.querySelectorAll("#toc .toc-link");t.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),t.forEach(t=>t.classList.remove("active")),this.classList.add("active");const n=this.getAttribute("href");if(n&&n.startsWith("#")){const t=document.querySelector(n);t&&t.scrollIntoView({behavior:"smooth",block:"start"})}this.style.transform="scale(0.95)",setTimeout(()=>{this.style.transform=""},150)}),e.addEventListener("mouseenter",function(){this.style.transform="translateX(4px)"}),e.addEventListener("mouseleave",function(){this.style.transform=""})})}function n(){const t=document.getElementById("toc");document.querySelectorAll("#toc .toc-link").forEach((t,e)=>{t.style.opacity="0",t.style.transform="translateY(10px)",setTimeout(()=>{t.style.transition="all 0.3s ease",t.style.opacity="1",t.style.transform="translateY(0)"},100+50*e)}),t.style.opacity="0",t.style.transform="translateY(20px)",setTimeout(()=>{t.style.transition="all 0.6s cubic-bezier(0.4, 0, 0.2, 1)",t.style.opacity="1",t.style.transform="translateY(0)"},200)}function o(){const t=document.querySelectorAll("#toc .toc-link"),e=[];t.forEach(t=>{const n=t.getAttribute("href");if(n&&n.startsWith("#")){const o=document.querySelector(n);o&&e.push({element:o,link:t})}});let n=!1;function o(){const o=window.pageYOffset,s=window.innerHeight;let i=null;e.forEach(({element:t,link:e})=>{const n=t.getBoundingClientRect(),c=n.top+o,r=c+n.height;o>=c-100&&o<r-s/2&&(i=e)}),t.forEach(t=>t.classList.remove("active")),i&&i.classList.add("active"),n=!1}window.addEventListener("scroll",function(){n||(requestAnimationFrame(o),n=!0)},{passive:!0}),o()}document.addEventListener("DOMContentLoaded",function(){t()}),setTimeout(()=>{!function(){const t=document.getElementById("toc");if(!t)return;const e=document.createElement("button");e.innerHTML="ðŸ“‹",e.className="toc-collapse-btn",e.style.cssText="\n            position: absolute;\n            top: 10px;\n            right: 10px;\n            background: none;\n            border: none;\n            font-size: 16px;\n            cursor: pointer;\n            padding: 5px;\n            border-radius: 4px;\n            transition: all 0.2s ease;\n        ";const n=t.querySelector(".toc-list");let o=!1;e.addEventListener("click",function(){o=!o,o?(n.style.maxHeight="0",n.style.overflow="hidden",e.innerHTML="ðŸ“‚",e.style.transform="rotate(0deg)"):(n.style.maxHeight="none",n.style.overflow="visible",e.innerHTML="ðŸ“‹",e.style.transform="rotate(0deg)")}),t.style.position="relative",t.appendChild(e)}(),function(){const t=document.getElementById("toc");if(!t)return;const e=document.createElement("input");e.type="text",e.placeholder="æœç´¢ç›®å½•...",e.className="toc-search",e.style.cssText="\n            width: 100%;\n            padding: 8px 12px;\n            margin-bottom: 12px;\n            border: 1px solid rgba(0,0,0,0.1);\n            border-radius: 6px;\n            font-size: 14px;\n            background: rgba(255,255,255,0.8);\n            transition: all 0.2s ease;\n        ";const n=t.querySelector(".toc-title");n&&n.parentNode.insertBefore(e,n.nextSibling),e.addEventListener("input",function(){const t=this.value.toLowerCase();document.querySelectorAll("#toc .toc-link").forEach(e=>{const n=e.textContent.toLowerCase(),o=e.closest("li");n.includes(t)?(o.style.display="block",e.style.opacity="1"):(o.style.display=t?"none":"block",e.style.opacity=t?"0.3":"1")})}),e.addEventListener("focus",function(){this.style.borderColor="#3498db",this.style.boxShadow="0 0 0 3px rgba(52, 152, 219, 0.1)"}),e.addEventListener("blur",function(){this.style.borderColor="rgba(0,0,0,0.1)",this.style.boxShadow="none"})}(),function(){const t=document.getElementById("toc");if(!t)return;const e=document.querySelectorAll("#toc .toc-link"),n=document.createElement("div");n.className="toc-stats",n.style.cssText="\n            margin-top: 12px;\n            padding-top: 12px;\n            border-top: 1px solid rgba(0,0,0,0.1);\n            font-size: 12px;\n            color: #7f8c8d;\n            text-align: center;\n        ",n.innerHTML=`å…± ${e.length} ä¸ªç« èŠ‚`,t.appendChild(n)}()},500),window.TOCEnhancer={enhanceTOC:t,initTOCInteractions:e,initTOCAnimations:n,initTOCScrollSpy:o}}();