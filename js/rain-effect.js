class RainEffect{constructor(){this.rainContainer=null,this.rainDrops=[],this.isActive=!1,this.animationId=null,this.splashTimeout=[],this.config={maxDrops:this.isMobile()?40:80,dropSpeed:{min:2,max:6},dropHeight:{min:15,max:30},spawnRate:.7,splashChance:.1,windEffect:.5},this.init()}isMobile(){return window.innerWidth<=768}init(){window.matchMedia("(prefers-reduced-motion: reduce)").matches&&(this.config.maxDrops=Math.floor(.3*this.config.maxDrops),this.config.spawnRate=.3,this.config.splashChance=0),this.createRainContainer(),this.startRain(),window.addEventListener("resize",this.handleResize.bind(this)),document.addEventListener("visibilitychange",this.handleVisibilityChange.bind(this))}createRainContainer(){this.rainContainer=document.createElement("div"),this.rainContainer.className="rain-container",this.rainContainer.id="rain-effect-container";const i=document.getElementById("banner");i?i.appendChild(this.rainContainer):document.body.appendChild(this.rainContainer)}createRainDrop(){const i=document.createElement("div");i.className="rain-drop";const t=Math.random()*(window.innerWidth+100)-50,n=this.config.dropHeight.min+Math.random()*(this.config.dropHeight.max-this.config.dropHeight.min),e=this.config.dropSpeed.min+Math.random()*(this.config.dropSpeed.max-this.config.dropSpeed.min),a=(window.innerHeight+n)/e/60;i.style.left=t+"px",i.style.height=n+"px",i.style.animationDuration=a+"s",i.style.animationDelay=1*Math.random()+"s";const s=(Math.random()-.5)*this.config.windEffect;i.style.transform=`translateX(${s}px)`,i.style.opacity=.3+.4*Math.random(),this.rainContainer.appendChild(i),this.rainDrops.push({element:i,x:t,speed:e,createdAt:Date.now()}),setTimeout(()=>{this.removeRainDrop(i)},1e3*(a+1)),Math.random()<this.config.splashChance&&this.createSplash(t,window.innerHeight-50,1e3*a)}createSplash(i,t,n){const e=setTimeout(()=>{const n=document.createElement("div");n.className="rain-splash",n.style.left=i-4+"px",n.style.top=t+"px",this.rainContainer.appendChild(n),setTimeout(()=>{n&&n.parentNode&&n.parentNode.removeChild(n)},400)},n);this.splashTimeout.push(e)}removeRainDrop(i){i&&i.parentNode&&i.parentNode.removeChild(i),this.rainDrops=this.rainDrops.filter(t=>t.element!==i)}updateRain(){this.isActive&&(this.rainDrops.length<this.config.maxDrops&&Math.random()<this.config.spawnRate&&this.createRainDrop(),this.animationId=requestAnimationFrame(this.updateRain.bind(this)))}startRain(){this.isActive||(this.isActive=!0,this.updateRain())}stopRain(){this.isActive=!1,this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.rainDrops.forEach(i=>{this.removeRainDrop(i.element)}),this.rainDrops=[],this.splashTimeout.forEach(i=>clearTimeout(i)),this.splashTimeout=[],this.rainContainer&&(this.rainContainer.innerHTML="")}handleResize(){const i=this.config.maxDrops<=40,t=this.isMobile();i!==t&&(this.config.maxDrops=t?40:80)}handleVisibilityChange(){document.hidden?this.stopRain():this.startRain()}destroy(){this.stopRain(),this.rainContainer&&this.rainContainer.parentNode&&this.rainContainer.parentNode.removeChild(this.rainContainer),window.removeEventListener("resize",this.handleResize),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}}document.addEventListener("DOMContentLoaded",function(){setTimeout(()=>{window.rainEffect=new RainEffect},1e3)}),window.addEventListener("beforeunload",function(){window.rainEffect&&window.rainEffect.destroy()});